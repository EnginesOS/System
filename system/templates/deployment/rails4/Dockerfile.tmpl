FROM  engines/passenger:_System(release)

ADD home home
ADD engines home/engines
ENV CONTFSVolHome /home/fs/

RUN chown 2666 `find /var /usr/share /usr/local /home -user ruby`;\
 /usr/sbin/usermod -u 2666 ruby

ENV ContUser ruby
ENV RAILS_ENV production
EXPOSE 3000
#Fix me needs to by dynamic
#ENV SECRET_KEY_BASE 7a5b48ca10b6578639a9d41eb482ce8669f6e432e5b469c4a461c82dbd39a99da0711c30e78259e2440dc46cf9af7f1cc34f791bb62545b9f630f8a210731ba1
ENV SECRET_KEY_BASE	_Builder(random(128))
#Built as
#_Builder(engine_name)
#_Builder(domain_name)
#_Builder(hostname)
#_Builder(http_protocol)
#_Builder(repoName)
#_Builder(webPort)
#_Builder(build_name)
#_Builder(runtime)
#_Builder(set_environments) 
#_Builder(environments)
#Licence
#_Blueprint(software,license_name)
#_Blueprint(software,rake_tasks)
#_Blueprint(software,softwareservices)


     