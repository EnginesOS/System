<!DOCTYPE html>

<html>
<head>
<meta charset="UTF-8">

<title>class DockerApi - RDoc Documentation</title>

<link href="./fonts.css" rel="stylesheet">
<link href="./rdoc.css" rel="stylesheet">

<script type="text/javascript">
  var rdoc_rel_prefix = "./";
</script>

<script src="./js/jquery.js"></script>
<script src="./js/navigation.js"></script>
<script src="./js/search_index.js"></script>
<script src="./js/search.js"></script>
<script src="./js/searcher.js"></script>
<script src="./js/darkfish.js"></script>
<body id="top" role="document" class="class">
	<nav role="navigation">
		<div id="project-navigation">
			<div id="home-section" role="region" title="Quick navigation"
				class="nav-section">
				<h2>
					<a href="./index.html" rel="home">Home</a>
				</h2>

				<div id="table-of-contents-navigation">
					<a href="./table_of_contents.html#pages">Pages</a> <a
						href="./table_of_contents.html#classes">Classes</a> <a
						href="./table_of_contents.html#methods">Methods</a>
				</div>
			</div>

			<div id="search-section" role="search"
				class="project-section initially-hidden">
				<form action="#" method="get" accept-charset="utf-8">
					<div id="search-field-wrapper">
						<input id="search-field" role="combobox" aria-label="Search"
							aria-autocomplete="list" aria-controls="search-results"
							type="text" name="search" placeholder="Search" spellcheck="false"
							title="Type to search, Up and Down to navigate, Enter to load">
					</div>

					<ul id="search-results" aria-label="Search Results"
						aria-busy="false" aria-expanded="false" aria-atomic="false"
						class="initially-hidden"></ul>
				</form>
			</div>

		</div>



		<div id="class-metadata">

			<div id="parent-class-section" class="nav-section">
				<h3>Parent</h3>


				<p class="link">
					<a href="Object.html">Object</a>
			</div>



			<!-- Method Quickref -->
			<div id="method-list-section" class="nav-section">
				<h3>Methods</h3>

				<ul class="link-list" role="directory">

					<li><a href="#method-i-clean_up_dangling_images">#clean_up_dangling_images</a>
					<li><a href="#method-i-clear_error">#clear_error</a>
					<li><a href="#method-i-container_commandline_args">#container_commandline_args</a>
					<li><a href="#method-i-container_log_dir">#container_log_dir</a>
					<li><a href="#method-i-container_state_dir">#container_state_dir</a>
					<li><a href="#method-i-create_container">#create_container</a>
					<li><a href="#method-i-delete_image">#delete_image</a>
					<li><a href="#method-i-destroy_container">#destroy_container</a>
					<li><a href="#method-i-docker_exec">#docker_exec</a>
					<li><a href="#method-i-get_container_logdir">#get_container_logdir</a>
					<li><a href="#method-i-get_envionment_options">#get_envionment_options</a>
					<li><a href="#method-i-get_port_options">#get_port_options</a>
					<li><a href="#method-i-get_volume_option">#get_volume_option</a>
					<li><a href="#method-i-image_exists-3F">#image_exists?</a>
					<li><a href="#method-i-inspect_container">#inspect_container</a>
					<li><a href="#method-i-logs_container">#logs_container</a>
					<li><a href="#method-i-pause_container">#pause_container</a>
					<li><a href="#method-i-ps_container">#ps_container</a>
					<li><a href="#method-i-run_docker">#run_docker</a>
					<li><a href="#method-i-signal_container_process">#signal_container_process</a>
					<li><a href="#method-i-start_container">#start_container</a>
					<li><a href="#method-i-stop_container">#stop_container</a>
					<li><a href="#method-i-unpause_container">#unpause_container</a>
				</ul>
			</div>

		</div>
	</nav>

	<main role="main" aria-labelledby="class-DockerApi">
	<h1 id="class-DockerApi" class="class">class DockerApi</h1>

	<section class="description"></section>




	<section id="5Buntitled-5D" class="documentation-section">







		<section class="attribute-method-details" class="method-section">
			<header>
				<h3>Attributes</h3>
			</header>


			<div id="attribute-i-last_error" class="method-detail">
				<div class="method-heading attribute-method-heading">
					<span class="method-name">last_error</span><span
						class="attribute-access-type">[R]</span>
				</div>

				<div class="method-description"></div>
			</div>

		</section>



		<section id="public-instance-5Buntitled-5D-method-details"
			class="method-section">
			<header>
				<h3>Public Instance Methods</h3>
			</header>


			<div id="method-i-clean_up_dangling_images" class="method-detail ">

				<div class="method-heading">
					<span class="method-name">clean_up_dangling_images</span><span
						class="method-args">()</span> <span class="method-click-advice">click
						to toggle source</span>

				</div>


				<div class="method-description">






					<div class="method-source-code"
						id="clean_up_dangling_images-source">
						<pre>
							<span class="ruby-comment"># File api/system/DockerApi.rb, line 348</span>
 <span class="ruby-keyword">def</span> <span class="ruby-identifier">clean_up_dangling_images</span>
 
<span class="ruby-identifier">cmd</span> = <span class="ruby-string">&quot;docker rmi $( docker images -f \&quot;dangling=true\&quot; -q)&quot;</span>
   <span class="ruby-constant">SystemUtils</span>.<span
								class="ruby-identifier">run_system</span>(<span
								class="ruby-identifier">cmd</span>)
 <span class="ruby-keyword">end</span>
						</pre>
					</div>

				</div>




			</div>


			<div id="method-i-container_commandline_args" class="method-detail ">

				<div class="method-heading">
					<span class="method-name">container_commandline_args</span><span
						class="method-args">(container)</span> <span
						class="method-click-advice">click to toggle source</span>

				</div>


				<div class="method-description">






					<div class="method-source-code"
						id="container_commandline_args-source">
						<pre>
							<span class="ruby-comment"># File api/system/DockerApi.rb, line 259</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">container_commandline_args</span>(<span
								class="ruby-identifier">container</span>)
  <span class="ruby-identifier">clear_error</span>
  <span class="ruby-keyword">begin</span>
    <span class="ruby-identifier">envionment_options</span> = <span
								class="ruby-identifier">get_envionment_options</span>( <span
								class="ruby-identifier">container</span>)
    <span class="ruby-identifier">port_options</span> = <span
								class="ruby-identifier">get_port_options</span>( <span
								class="ruby-identifier">container</span>)
    <span class="ruby-identifier">volume_option</span> = <span
								class="ruby-identifier">get_volume_option</span>( <span
								class="ruby-identifier">container</span>)
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">container</span>.<span
								class="ruby-identifier">conf_self_start</span> <span
								class="ruby-operator">==</span> <span class="ruby-keyword">false</span>
      <span class="ruby-identifier">start_cmd</span>=<span
								class="ruby-string">&quot; /bin/bash /home/init.sh&quot;</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">start_cmd</span>=<span
								class="ruby-string">&quot; &quot;</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-identifier">commandargs</span> =  <span
								class="ruby-string">&quot;-h &quot;</span> <span
								class="ruby-operator">+</span> <span class="ruby-identifier">container</span>.<span
								class="ruby-identifier">hostName</span> <span
								class="ruby-operator">+</span>         <span
								class="ruby-identifier">envionment_options</span> <span
								class="ruby-operator">+</span>         <span class="ruby-string">&quot; --memory=&quot;</span> <span
								class="ruby-operator">+</span> <span class="ruby-identifier">container</span>.<span
								class="ruby-identifier">memory</span>.<span
								class="ruby-identifier">to_s</span> <span class="ruby-operator">+</span> <span
								class="ruby-string">&quot;m &quot;</span> <span
								class="ruby-operator">+</span>        <span
								class="ruby-identifier">volume_option</span> <span
								class="ruby-operator">+</span> <span class="ruby-string">&quot; &quot;</span> <span
								class="ruby-operator">+</span>        <span
								class="ruby-identifier">port_options</span> <span
								class="ruby-operator">+</span>        <span class="ruby-string">&quot; --cidfile &quot;</span> <span
								class="ruby-operator">+</span> <span class="ruby-constant">SysConfig</span>.<span
								class="ruby-constant">CidDir</span> <span class="ruby-operator">+</span> <span
								class="ruby-string">&quot;/&quot;</span> <span
								class="ruby-operator">+</span> <span class="ruby-identifier">container</span>.<span
								class="ruby-identifier">containerName</span> <span
								class="ruby-operator">+</span> <span class="ruby-string">&quot;.cid &quot;</span> <span
								class="ruby-operator">+</span>        <span class="ruby-string">&quot;--name &quot;</span> <span
								class="ruby-operator">+</span> <span class="ruby-identifier">container</span>.<span
								class="ruby-identifier">containerName</span> <span
								class="ruby-operator">+</span>         <span class="ruby-string">&quot;  -t &quot;</span> <span
								class="ruby-operator">+</span> <span class="ruby-identifier">container</span>.<span
								class="ruby-identifier">image</span> <span class="ruby-operator">+</span> <span
								class="ruby-string">&quot; &quot;</span> <span
								class="ruby-operator">+</span>        <span
								class="ruby-identifier">start_cmd</span>

    <span class="ruby-keyword">return</span> <span
								class="ruby-identifier">commandargs</span>
  <span class="ruby-keyword">rescue</span> <span class="ruby-constant">Exception</span>=<span
								class="ruby-operator">&gt;</span><span class="ruby-identifier">e</span>
    <span class="ruby-constant">SystemUtils</span>.<span
								class="ruby-identifier">log_exception</span>(<span
								class="ruby-identifier">e</span>)
    <span class="ruby-keyword">return</span> <span
								class="ruby-identifier">e</span>.<span class="ruby-identifier">to_s</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span>
						</pre>
					</div>

				</div>




			</div>


			<div id="method-i-create_container" class="method-detail ">

				<div class="method-heading">
					<span class="method-name">create_container</span><span
						class="method-args">(container)</span> <span
						class="method-click-advice">click to toggle source</span>

				</div>


				<div class="method-description">






					<div class="method-source-code" id="create_container-source">
						<pre>
							<span class="ruby-comment"># File api/system/DockerApi.rb, line 3</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">create_container</span> <span
								class="ruby-identifier">container</span>
  <span class="ruby-identifier">clear_error</span>
  <span class="ruby-keyword">begin</span>
    <span class="ruby-identifier">commandargs</span> = <span
								class="ruby-identifier">container_commandline_args</span>(<span
								class="ruby-identifier">container</span>)
    <span class="ruby-identifier">commandargs</span> = <span
								class="ruby-string">&quot; run  -d &quot;</span> <span
								class="ruby-operator">+</span> <span class="ruby-identifier">commandargs</span>
    <span class="ruby-constant">SystemUtils</span>.<span
								class="ruby-identifier">debug_output</span>(<span
								class="ruby-string">&quot;create cont&quot;</span>,<span
								class="ruby-identifier">commandargs</span>)
    <span class="ruby-identifier">retval</span> = <span
								class="ruby-identifier">run_docker</span>(<span
								class="ruby-identifier">commandargs</span>,<span
								class="ruby-identifier">container</span>)
    <span class="ruby-keyword">return</span> <span
								class="ruby-identifier">retval</span>
  <span class="ruby-keyword">rescue</span> <span class="ruby-constant">Exception</span>=<span
								class="ruby-operator">&gt;</span><span class="ruby-identifier">e</span>
    <span class="ruby-identifier">container</span>.<span
								class="ruby-identifier">last_error</span>=(<span
								class="ruby-string">&quot;Failed To Create &quot;</span>)
    <span class="ruby-constant">SystemUtils</span>.<span
								class="ruby-identifier">log_exception</span>(<span
								class="ruby-identifier">e</span>)
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">false</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span>
						</pre>
					</div>

				</div>




			</div>


			<div id="method-i-delete_image" class="method-detail ">

				<div class="method-heading">
					<span class="method-name">delete_image</span><span
						class="method-args">(container)</span> <span
						class="method-click-advice">click to toggle source</span>

				</div>


				<div class="method-description">






					<div class="method-source-code" id="delete_image-source">
						<pre>
							<span class="ruby-comment"># File api/system/DockerApi.rb, line 130</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">delete_image</span> <span
								class="ruby-identifier">container</span>
  <span class="ruby-identifier">clear_error</span>
  <span class="ruby-keyword">begin</span>
    <span class="ruby-identifier">commandargs</span>= <span
								class="ruby-string">&quot; rmi &quot;</span> <span
								class="ruby-operator">+</span>   <span class="ruby-identifier">container</span>.<span
								class="ruby-identifier">image</span>
    <span class="ruby-identifier">ret_val</span> =  <span
								class="ruby-identifier">run_docker</span>(<span
								class="ruby-identifier">commandargs</span>,<span
								class="ruby-identifier">container</span>)
    <span class="ruby-keyword">return</span> <span
								class="ruby-identifier">ret_val</span>
  <span class="ruby-keyword">rescue</span> <span class="ruby-constant">Exception</span>=<span
								class="ruby-operator">&gt;</span><span class="ruby-identifier">e</span>
    <span class="ruby-identifier">container</span>.<span
								class="ruby-identifier">last_error</span>=( <span
								class="ruby-string">&quot;Failed To Delete &quot;</span> <span
								class="ruby-operator">+</span> <span class="ruby-identifier">e</span>.<span
								class="ruby-identifier">to_s</span>)
    <span class="ruby-constant">SystemUtils</span>.<span
								class="ruby-identifier">log_exception</span>(<span
								class="ruby-identifier">e</span>)
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">false</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span>
						</pre>
					</div>

				</div>




			</div>


			<div id="method-i-destroy_container" class="method-detail ">

				<div class="method-heading">
					<span class="method-name">destroy_container</span><span
						class="method-args">(container)</span> <span
						class="method-click-advice">click to toggle source</span>

				</div>


				<div class="method-description">






					<div class="method-source-code" id="destroy_container-source">
						<pre>
							<span class="ruby-comment"># File api/system/DockerApi.rb, line 117</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">destroy_container</span> <span
								class="ruby-identifier">container</span>
  <span class="ruby-identifier">clear_error</span>
  <span class="ruby-keyword">begin</span>
    <span class="ruby-identifier">commandargs</span>= <span
								class="ruby-string">&quot; rm &quot;</span> <span
								class="ruby-operator">+</span>   <span class="ruby-identifier">container</span>.<span
								class="ruby-identifier">containerName</span>
    <span class="ruby-identifier">ret_val</span> = <span
								class="ruby-identifier">run_docker</span>(<span
								class="ruby-identifier">commandargs</span>,<span
								class="ruby-identifier">container</span>)
  <span class="ruby-keyword">rescue</span> <span class="ruby-constant">Exception</span>=<span
								class="ruby-operator">&gt;</span><span class="ruby-identifier">e</span>
    <span class="ruby-identifier">container</span>.<span
								class="ruby-identifier">last_error</span>=( <span
								class="ruby-string">&quot;Failed To Destroy &quot;</span> <span
								class="ruby-operator">+</span> <span class="ruby-identifier">e</span>.<span
								class="ruby-identifier">to_s</span>)
    <span class="ruby-constant">SystemUtils</span>.<span
								class="ruby-identifier">log_exception</span>(<span
								class="ruby-identifier">e</span>)

    <span class="ruby-keyword">return</span> <span class="ruby-keyword">false</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span>
						</pre>
					</div>

				</div>




			</div>


			<div id="method-i-docker_exec" class="method-detail ">

				<div class="method-heading">
					<span class="method-name">docker_exec</span><span
						class="method-args">(container,command,args)</span> <span
						class="method-click-advice">click to toggle source</span>

				</div>


				<div class="method-description">






					<div class="method-source-code" id="docker_exec-source">
						<pre>
							<span class="ruby-comment"># File api/system/DockerApi.rb, line 143</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">docker_exec</span>(<span
								class="ruby-identifier">container</span>,<span
								class="ruby-identifier">command</span>,<span
								class="ruby-identifier">args</span>)
  <span class="ruby-identifier">run_args</span> = <span
								class="ruby-string">&quot;exec &quot;</span> <span
								class="ruby-operator">+</span> <span class="ruby-identifier">container</span>.<span
								class="ruby-identifier">containerName</span> <span
								class="ruby-operator">+</span> <span class="ruby-string">&quot; &quot;</span> <span
								class="ruby-operator">+</span> <span class="ruby-identifier">command</span> <span
								class="ruby-operator">+</span> <span class="ruby-string">&quot; &quot;</span> <span
								class="ruby-operator">+</span> <span class="ruby-identifier">args</span>
  
  <span class="ruby-keyword">return</span> <span class="ruby-identifier">run_docker</span>(<span
								class="ruby-identifier">run_args</span>,<span
								class="ruby-identifier">container</span>)
<span class="ruby-keyword">end</span>
						</pre>
					</div>

				</div>




			</div>


			<div id="method-i-get_container_logdir" class="method-detail ">

				<div class="method-heading">
					<span class="method-name">get_container_logdir</span><span
						class="method-args">(container)</span> <span
						class="method-click-advice">click to toggle source</span>

				</div>


				<div class="method-description">






					<div class="method-source-code" id="get_container_logdir-source">
						<pre>
							<span class="ruby-comment"># File api/system/DockerApi.rb, line 318</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">get_container_logdir</span>(<span
								class="ruby-identifier">container</span>)
  <span class="ruby-identifier">clear_error</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">container</span>.<span
								class="ruby-identifier">framework</span> <span
								class="ruby-operator">==</span> <span class="ruby-keyword">nil</span> <span
								class="ruby-operator">||</span> <span class="ruby-identifier">container</span>.<span
								class="ruby-identifier">framework</span>.<span
								class="ruby-identifier">length</span> <span
								class="ruby-operator">==</span><span class="ruby-value">0</span>
    <span class="ruby-keyword">return</span> <span class="ruby-string">&quot;/var/log&quot;</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">container_logdetails_file_name</span> = <span
								class="ruby-keyword">false</span>

  <span class="ruby-identifier">framework_logdetails_file_name</span> =  <span
								class="ruby-constant">SysConfig</span>.<span
								class="ruby-constant">DeploymentTemplates</span> <span
								class="ruby-operator">+</span> <span class="ruby-string">&quot;/&quot;</span> <span
								class="ruby-operator">+</span> <span class="ruby-identifier">container</span>.<span
								class="ruby-identifier">framework</span> <span
								class="ruby-operator">+</span> <span class="ruby-string">&quot;/home/LOG_DIR&quot;</span>
  <span class="ruby-constant">SystemUtils</span>.<span
								class="ruby-identifier">debug_output</span>(<span
								class="ruby-string">&quot;Frame logs details&quot;</span>,<span
								class="ruby-identifier">framework_logdetails_file_name</span>)

  <span class="ruby-keyword">if</span> <span class="ruby-constant">File</span>.<span
								class="ruby-identifier">exists?</span>(<span
								class="ruby-identifier">framework_logdetails_file_name</span> )
    <span class="ruby-identifier">container_logdetails_file_name</span> = <span
								class="ruby-identifier">framework_logdetails_file_name</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">container_logdetails_file_name</span> = <span
								class="ruby-constant">SysConfig</span>.<span
								class="ruby-constant">DeploymentTemplates</span> <span
								class="ruby-operator">+</span> <span class="ruby-string">&quot;/global/home/LOG_DIR&quot;</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-constant">SystemUtils</span>.<span
								class="ruby-identifier">debug_output</span>(<span
								class="ruby-string">&quot;Container log details&quot;</span>,<span
								class="ruby-identifier">container_logdetails_file_name</span>)
  <span class="ruby-keyword">begin</span>
    <span class="ruby-identifier">container_logdetails</span> = <span
								class="ruby-constant">File</span>.<span class="ruby-identifier">read</span>(<span
								class="ruby-identifier">container_logdetails_file_name</span>)
  <span class="ruby-keyword">rescue</span>
    <span class="ruby-identifier">container_logdetails</span> = <span
								class="ruby-string">&quot;/var/log&quot;</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-keyword">return</span> <span class="ruby-identifier">container_logdetails</span>
<span class="ruby-keyword">rescue</span> <span class="ruby-constant">Exception</span>=<span
								class="ruby-operator">&gt;</span><span class="ruby-identifier">e</span>
  <span class="ruby-constant">SystemUtils</span>.<span
								class="ruby-identifier">log_exception</span>(<span
								class="ruby-identifier">e</span>)

  <span class="ruby-keyword">return</span> <span class="ruby-keyword">false</span>
<span class="ruby-keyword">end</span>
						</pre>
					</div>

				</div>




			</div>


			<div id="method-i-get_envionment_options" class="method-detail ">

				<div class="method-heading">
					<span class="method-name">get_envionment_options</span><span
						class="method-args">(container)</span> <span
						class="method-click-advice">click to toggle source</span>

				</div>


				<div class="method-description">






					<div class="method-source-code" id="get_envionment_options-source">
						<pre>
							<span class="ruby-comment"># File api/system/DockerApi.rb, line 221</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">get_envionment_options</span>(<span
								class="ruby-identifier">container</span>)
  <span class="ruby-identifier">e_option</span> =<span
								class="ruby-constant">String</span>.<span
								class="ruby-identifier">new</span>
  <span class="ruby-keyword">if</span>(<span class="ruby-identifier">container</span>.<span
								class="ruby-identifier">environments</span> <span
								class="ruby-operator">&amp;&amp;</span> <span
								class="ruby-identifier">container</span>.<span
								class="ruby-identifier">environments</span> <span
								class="ruby-operator">!=</span> <span class="ruby-keyword">nil</span>)
    <span class="ruby-identifier">container</span>.<span
								class="ruby-identifier">environments</span>.<span
								class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span
								class="ruby-operator">|</span><span class="ruby-identifier">environment</span><span
								class="ruby-operator">|</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">environment</span> <span
								class="ruby-operator">!=</span> <span class="ruby-keyword">nil</span>
        <span class="ruby-identifier">e_option</span> = <span
								class="ruby-identifier">e_option</span> <span
								class="ruby-operator">+</span> <span class="ruby-string">&quot; -e &quot;</span> <span
								class="ruby-operator">+</span> <span class="ruby-identifier">environment</span>.<span
								class="ruby-identifier">name</span> <span class="ruby-operator">+</span> <span
								class="ruby-string">&quot;=&quot;</span> <span
								class="ruby-operator">+</span> <span class="ruby-string">&#39;&quot;&#39;</span> <span
								class="ruby-operator">+</span> <span class="ruby-identifier">environment</span>.<span
								class="ruby-identifier">value</span> <span class="ruby-operator">+</span> <span
								class="ruby-string">&#39;&quot;&#39;</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">return</span> <span class="ruby-identifier">e_option</span>
<span class="ruby-keyword">rescue</span> <span class="ruby-constant">Exception</span>=<span
								class="ruby-operator">&gt;</span><span class="ruby-identifier">e</span>
  <span class="ruby-constant">SystemUtils</span>.<span
								class="ruby-identifier">log_exception</span>(<span
								class="ruby-identifier">e</span>)
  <span class="ruby-keyword">return</span> <span class="ruby-identifier">e</span>.<span
								class="ruby-identifier">to_s</span>
<span class="ruby-keyword">end</span>
						</pre>
					</div>

				</div>




			</div>


			<div id="method-i-get_port_options" class="method-detail ">

				<div class="method-heading">
					<span class="method-name">get_port_options</span><span
						class="method-args">(container)</span> <span
						class="method-click-advice">click to toggle source</span>

				</div>


				<div class="method-description">






					<div class="method-source-code" id="get_port_options-source">
						<pre>
							<span class="ruby-comment"># File api/system/DockerApi.rb, line 236</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">get_port_options</span>(<span
								class="ruby-identifier">container</span>)
  <span class="ruby-identifier">eportoption</span> = <span
								class="ruby-constant">String</span>.<span
								class="ruby-identifier">new</span>
  <span class="ruby-keyword">if</span>(<span class="ruby-identifier">container</span>.<span
								class="ruby-identifier">eports</span> )
    <span class="ruby-identifier">container</span>.<span
								class="ruby-identifier">eports</span>.<span
								class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span
								class="ruby-operator">|</span><span class="ruby-identifier">eport</span><span
								class="ruby-operator">|</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">eport</span> <span
								class="ruby-operator">!=</span> <span class="ruby-keyword">nil</span> 
        <span class="ruby-identifier">eportoption</span> = <span
								class="ruby-identifier">eportoption</span> <span
								class="ruby-operator">+</span>  <span class="ruby-string">&quot; -p &quot;</span>
        <span class="ruby-keyword">if</span> <span
								class="ruby-identifier">eport</span>.<span
								class="ruby-identifier">external</span> <span
								class="ruby-operator">!=</span> <span class="ruby-keyword">nil</span> <span
								class="ruby-operator">&amp;&amp;</span> <span
								class="ruby-identifier">eport</span>.<span
								class="ruby-identifier">external</span>  <span
								class="ruby-operator">&gt;</span><span class="ruby-value">0</span>
          <span class="ruby-identifier">eportoption</span> = <span
								class="ruby-identifier">eportoption</span> <span
								class="ruby-operator">+</span> <span class="ruby-identifier">eport</span>.<span
								class="ruby-identifier">external</span>.<span
								class="ruby-identifier">to_s</span> <span class="ruby-operator">+</span> <span
								class="ruby-string">&quot;:&quot;</span>
        <span class="ruby-keyword">end</span>
        <span class="ruby-identifier">eportoption</span> = <span
								class="ruby-identifier">eportoption</span> <span
								class="ruby-operator">+</span> <span class="ruby-identifier">eport</span>.<span
								class="ruby-identifier">port</span>.<span
								class="ruby-identifier">to_s</span>
        <span class="ruby-keyword">if</span> <span
								class="ruby-identifier">eport</span>.<span
								class="ruby-identifier">proto_type</span> <span
								class="ruby-operator">==</span> <span class="ruby-keyword">nil</span>
          <span class="ruby-identifier">eport</span>.<span
								class="ruby-identifier">proto_type</span>=(<span
								class="ruby-string">&#39;tcp&#39;</span>)
        <span class="ruby-keyword">end</span>
        <span class="ruby-identifier">eportoption</span> = <span
								class="ruby-identifier">eportoption</span> <span
								class="ruby-operator">+</span> <span class="ruby-string">&quot;/&quot;</span><span
								class="ruby-operator">+</span> <span class="ruby-identifier">eport</span>.<span
								class="ruby-identifier">proto_type</span> <span
								class="ruby-operator">+</span> <span class="ruby-string">&quot; &quot;</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">return</span> <span class="ruby-identifier">eportoption</span>
<span class="ruby-keyword">rescue</span> <span class="ruby-constant">Exception</span>=<span
								class="ruby-operator">&gt;</span><span class="ruby-identifier">e</span>
  <span class="ruby-constant">SystemUtils</span>.<span
								class="ruby-identifier">log_exception</span>(<span
								class="ruby-identifier">e</span>)
  <span class="ruby-keyword">return</span> <span class="ruby-identifier">e</span>.<span
								class="ruby-identifier">to_s</span>
<span class="ruby-keyword">end</span>
						</pre>
					</div>

				</div>




			</div>


			<div id="method-i-get_volume_option" class="method-detail ">

				<div class="method-heading">
					<span class="method-name">get_volume_option</span><span
						class="method-args">(container)</span> <span
						class="method-click-advice">click to toggle source</span>

				</div>


				<div class="method-description">






					<div class="method-source-code" id="get_volume_option-source">
						<pre>
							<span class="ruby-comment"># File api/system/DockerApi.rb, line 287</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">get_volume_option</span>(<span
								class="ruby-identifier">container</span>)
  <span class="ruby-identifier">clear_error</span>
  <span class="ruby-keyword">begin</span>
    <span class="ruby-comment">#System</span>
    <span class="ruby-identifier">volume_option</span> = <span
								class="ruby-constant">SysConfig</span>.<span
								class="ruby-identifier">timeZone_fileMapping</span> <span
								class="ruby-comment">#latter this will be customised</span>
    <span class="ruby-identifier">volume_option</span> <span
								class="ruby-operator">+=</span> <span class="ruby-string">&quot; -v &quot;</span> <span
								class="ruby-operator">+</span> <span class="ruby-identifier">container_state_dir</span>(<span
								class="ruby-identifier">container</span>) <span
								class="ruby-operator">+</span> <span class="ruby-string">&quot;/run:/home/engines/run:rw &quot;</span>
    <span class="ruby-comment"># if container.ctype == &quot;service&quot;</span>
    <span class="ruby-comment">#  volume_option += &quot; -v &quot; + container_log_dir(container) + &quot;:/var/log:rw &quot;</span>
    <span class="ruby-identifier">incontainer_logdir</span> = <span
								class="ruby-identifier">get_container_logdir</span>(<span
								class="ruby-identifier">container</span>)
    <span class="ruby-identifier">volume_option</span> <span
								class="ruby-operator">+=</span> <span class="ruby-string">&quot; -v &quot;</span> <span
								class="ruby-operator">+</span> <span class="ruby-identifier">container_log_dir</span>(<span
								class="ruby-identifier">container</span>) <span
								class="ruby-operator">+</span> <span class="ruby-string">&quot;:/&quot;</span> <span
								class="ruby-operator">+</span> <span class="ruby-identifier">incontainer_logdir</span> <span
								class="ruby-operator">+</span> <span class="ruby-string">&quot;:rw &quot;</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">incontainer_logdir</span> <span
								class="ruby-operator">!=</span><span class="ruby-string">&quot;/var/log&quot;</span> <span
								class="ruby-operator">&amp;&amp;</span> <span
								class="ruby-identifier">incontainer_logdir</span> <span
								class="ruby-operator">!=</span><span class="ruby-string">&quot;/var/log/&quot;</span>
      <span class="ruby-identifier">volume_option</span> <span
								class="ruby-operator">+=</span> <span class="ruby-string">&quot; -v &quot;</span> <span
								class="ruby-operator">+</span> <span class="ruby-identifier">container_log_dir</span>(<span
								class="ruby-identifier">container</span>) <span
								class="ruby-operator">+</span> <span class="ruby-string">&quot;/vlog:/var/log/:rw&quot;</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-comment">#end</span>
    <span class="ruby-comment">#container specific</span>
    <span class="ruby-keyword">if</span>(<span class="ruby-identifier">container</span>.<span
								class="ruby-identifier">volumes</span>)
      <span class="ruby-identifier">container</span>.<span
								class="ruby-identifier">volumes</span>.<span
								class="ruby-identifier">each_value</span> <span
								class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span
								class="ruby-identifier">volume</span><span class="ruby-operator">|</span>
        <span class="ruby-keyword">if</span> <span
								class="ruby-identifier">volume</span> <span
								class="ruby-operator">!=</span><span class="ruby-keyword">nil</span>
          <span class="ruby-keyword">if</span> <span
								class="ruby-identifier">volume</span>.<span
								class="ruby-identifier">localpath</span> <span
								class="ruby-operator">!=</span><span class="ruby-keyword">nil</span>
            <span class="ruby-identifier">volume_option</span> = <span
								class="ruby-identifier">volume_option</span>.<span
								class="ruby-identifier">to_s</span> <span class="ruby-operator">+</span> <span
								class="ruby-string">&quot; -v &quot;</span> <span
								class="ruby-operator">+</span> <span class="ruby-identifier">volume</span>.<span
								class="ruby-identifier">localpath</span>.<span
								class="ruby-identifier">to_s</span> <span class="ruby-operator">+</span> <span
								class="ruby-string">&quot;:/&quot;</span> <span
								class="ruby-operator">+</span> <span class="ruby-identifier">volume</span>.<span
								class="ruby-identifier">remotepath</span>.<span
								class="ruby-identifier">to_s</span> <span class="ruby-operator">+</span>  <span
								class="ruby-string">&quot;:&quot;</span> <span
								class="ruby-operator">+</span> <span class="ruby-identifier">volume</span>.<span
								class="ruby-identifier">permissions</span>.<span
								class="ruby-identifier">to_s</span>
          <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">return</span> <span
								class="ruby-identifier">volume_option</span>
  <span class="ruby-keyword">rescue</span> <span class="ruby-constant">Exception</span>=<span
								class="ruby-operator">&gt;</span><span class="ruby-identifier">e</span>
    <span class="ruby-constant">SystemUtils</span>.<span
								class="ruby-identifier">log_exception</span>(<span
								class="ruby-identifier">e</span>)
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">false</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span>
						</pre>
					</div>

				</div>




			</div>


			<div id="method-i-image_exists-3F" class="method-detail ">

				<div class="method-heading">
					<span class="method-name">image_exists?</span><span
						class="method-args">(image_name)</span> <span
						class="method-click-advice">click to toggle source</span>

				</div>


				<div class="method-description">






					<div class="method-source-code" id="image_exists-3F-source">
						<pre>
							<span class="ruby-comment"># File api/system/DockerApi.rb, line 51</span>
<span class="ruby-keyword">def</span>   <span class="ruby-identifier">image_exists?</span> (<span
								class="ruby-identifier">image_name</span>)
  <span class="ruby-identifier">cmd</span>= <span class="ruby-string">&quot;docker images -q &quot;</span> <span
								class="ruby-operator">+</span> <span class="ruby-identifier">image_name</span>
  <span class="ruby-identifier">p</span> <span class="ruby-identifier">cmd</span>
  <span class="ruby-identifier">res</span> = <span class="ruby-constant">SystemUtils</span>.<span
								class="ruby-identifier">run_system</span>(<span
								class="ruby-identifier">cmd</span>)

  <span class="ruby-keyword">if</span> <span class="ruby-identifier">res</span>.<span
								class="ruby-identifier">length</span> <span
								class="ruby-operator">&gt;</span><span class="ruby-value">0</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">false</span>
  <span class="ruby-keyword">end</span>

<span class="ruby-keyword">end</span>
						</pre>
					</div>

				</div>




			</div>


			<div id="method-i-inspect_container" class="method-detail ">

				<div class="method-heading">
					<span class="method-name">inspect_container</span><span
						class="method-args">(container)</span> <span
						class="method-click-advice">click to toggle source</span>

				</div>


				<div class="method-description">






					<div class="method-source-code" id="inspect_container-source">
						<pre>
							<span class="ruby-comment"># File api/system/DockerApi.rb, line 106</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">inspect_container</span> <span
								class="ruby-identifier">container</span>
  <span class="ruby-identifier">clear_error</span>
  <span class="ruby-keyword">begin</span>
    <span class="ruby-identifier">commandargs</span>=<span
								class="ruby-string">&quot; inspect &quot;</span> <span
								class="ruby-operator">+</span> <span class="ruby-identifier">container</span>.<span
								class="ruby-identifier">containerName</span>
    <span class="ruby-keyword">return</span>  <span
								class="ruby-identifier">run_docker</span>(<span
								class="ruby-identifier">commandargs</span>,<span
								class="ruby-identifier">container</span>)
  <span class="ruby-keyword">rescue</span>  <span class="ruby-constant">Exception</span>=<span
								class="ruby-operator">&gt;</span><span class="ruby-identifier">e</span>
    <span class="ruby-constant">SystemUtils</span>.<span
								class="ruby-identifier">log_exception</span>(<span
								class="ruby-identifier">e</span>)
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">false</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span>
						</pre>
					</div>

				</div>




			</div>


			<div id="method-i-logs_container" class="method-detail ">

				<div class="method-heading">
					<span class="method-name">logs_container</span><span
						class="method-args">(container)</span> <span
						class="method-click-advice">click to toggle source</span>

				</div>


				<div class="method-description">






					<div class="method-source-code" id="logs_container-source">
						<pre>
							<span class="ruby-comment"># File api/system/DockerApi.rb, line 95</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">logs_container</span> <span
								class="ruby-identifier">container</span>
  <span class="ruby-identifier">clear_error</span>
  <span class="ruby-keyword">begin</span>
    <span class="ruby-identifier">commandargs</span>=<span
								class="ruby-string">&quot;docker logs &quot;</span> <span
								class="ruby-operator">+</span> <span class="ruby-identifier">container</span>.<span
								class="ruby-identifier">containerName</span>
    <span class="ruby-keyword">return</span>  <span
								class="ruby-constant">SystemUtils</span>.<span
								class="ruby-identifier">run_system</span>(<span
								class="ruby-identifier">commandargs</span>)
  <span class="ruby-keyword">rescue</span>  <span class="ruby-constant">Exception</span>=<span
								class="ruby-operator">&gt;</span><span class="ruby-identifier">e</span>
    <span class="ruby-constant">SystemUtils</span>.<span
								class="ruby-identifier">log_exception</span>(<span
								class="ruby-identifier">e</span>)
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">false</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span>
						</pre>
					</div>

				</div>




			</div>


			<div id="method-i-pause_container" class="method-detail ">

				<div class="method-heading">
					<span class="method-name">pause_container</span><span
						class="method-args">(container)</span> <span
						class="method-click-advice">click to toggle source</span>

				</div>


				<div class="method-description">






					<div class="method-source-code" id="pause_container-source">
						<pre>
							<span class="ruby-comment"># File api/system/DockerApi.rb, line 40</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">pause_container</span> <span
								class="ruby-identifier">container</span>
  <span class="ruby-identifier">clear_error</span>
  <span class="ruby-keyword">begin</span>
    <span class="ruby-identifier">commandargs</span> = <span
								class="ruby-string">&quot; pause &quot;</span> <span
								class="ruby-operator">+</span> <span class="ruby-identifier">container</span>.<span
								class="ruby-identifier">containerName</span>
    <span class="ruby-keyword">return</span>  <span
								class="ruby-identifier">run_docker</span>(<span
								class="ruby-identifier">commandargs</span>,<span
								class="ruby-identifier">container</span>)
  <span class="ruby-keyword">rescue</span>  <span class="ruby-constant">Exception</span>=<span
								class="ruby-operator">&gt;</span><span class="ruby-identifier">e</span>
    <span class="ruby-constant">SystemUtils</span>.<span
								class="ruby-identifier">log_exception</span>(<span
								class="ruby-identifier">e</span>)
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">false</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span>
						</pre>
					</div>

				</div>




			</div>


			<div id="method-i-ps_container" class="method-detail ">

				<div class="method-heading">
					<span class="method-name">ps_container</span><span
						class="method-args">(container)</span> <span
						class="method-click-advice">click to toggle source</span>

				</div>


				<div class="method-description">






					<div class="method-source-code" id="ps_container-source">
						<pre>
							<span class="ruby-comment"># File api/system/DockerApi.rb, line 75</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">ps_container</span> <span
								class="ruby-identifier">container</span>
  <span class="ruby-identifier">clear_error</span>
  <span class="ruby-keyword">begin</span>
    <span class="ruby-identifier">commandargs</span>=<span
								class="ruby-string">&quot;docker top &quot;</span> <span
								class="ruby-operator">+</span> <span class="ruby-identifier">container</span>.<span
								class="ruby-identifier">containerName</span> <span
								class="ruby-operator">+</span> <span class="ruby-string">&quot; axl&quot;</span>
    <span class="ruby-keyword">return</span>  <span
								class="ruby-constant">SystemUtils</span>.<span
								class="ruby-identifier">run_system</span>(<span
								class="ruby-identifier">commandargs</span>)
  <span class="ruby-keyword">rescue</span>  <span class="ruby-constant">Exception</span>=<span
								class="ruby-operator">&gt;</span><span class="ruby-identifier">e</span>
    <span class="ruby-constant">SystemUtils</span>.<span
								class="ruby-identifier">log_exception</span>(<span
								class="ruby-identifier">e</span>)
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">false</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span>
						</pre>
					</div>

				</div>




			</div>


			<div id="method-i-run_docker" class="method-detail ">

				<div class="method-heading">
					<span class="method-name">run_docker</span><span
						class="method-args">(args,container)</span> <span
						class="method-click-advice">click to toggle source</span>

				</div>


				<div class="method-description">






					<div class="method-source-code" id="run_docker-source">
						<pre>
							<span class="ruby-comment"># File api/system/DockerApi.rb, line 149</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">run_docker</span> (<span
								class="ruby-identifier">args</span>,<span
								class="ruby-identifier">container</span>)
  <span class="ruby-identifier">clear_error</span>
  <span class="ruby-identifier">require</span> <span class="ruby-string">&#39;open3&#39;</span>
  <span class="ruby-constant">SystemUtils</span>.<span
								class="ruby-identifier">debug_output</span>(<span
								class="ruby-string">&quot;Run docker&quot;</span>,<span
								class="ruby-identifier">args</span>)
  <span class="ruby-identifier">res</span> = <span class="ruby-constant">String</span>.<span
								class="ruby-identifier">new</span>
  <span class="ruby-identifier">error_mesg</span> = <span
								class="ruby-constant">String</span>.<span
								class="ruby-identifier">new</span>
  <span class="ruby-keyword">begin</span>
    <span class="ruby-identifier">container</span>.<span
								class="ruby-identifier">last_result</span>=(  <span
								class="ruby-string">&quot;&quot;</span>)
    <span class="ruby-constant">Open3</span>.<span
								class="ruby-identifier">popen3</span>(<span class="ruby-string">&quot;docker &quot;</span> <span
								class="ruby-operator">+</span> <span class="ruby-identifier">args</span> ) <span
								class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span
								class="ruby-identifier">stdin</span>, <span
								class="ruby-identifier">stdout</span>, <span
								class="ruby-identifier">stderr</span>, <span
								class="ruby-identifier">th</span><span class="ruby-operator">|</span>
      <span class="ruby-identifier">oline</span> = <span
								class="ruby-constant">String</span>.<span
								class="ruby-identifier">new</span>
      <span class="ruby-identifier">stderr_is_open</span>=<span
								class="ruby-keyword">true</span>
      <span class="ruby-keyword">begin</span>
        <span class="ruby-identifier">stdout</span>.<span
								class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span
								class="ruby-operator">|</span><span class="ruby-identifier">line</span><span
								class="ruby-operator">|</span>
          <span class="ruby-identifier">line</span> = <span
								class="ruby-identifier">line</span>.<span
								class="ruby-identifier">gsub</span>(<span class="ruby-regexp">/\\&quot;/</span>,<span
								class="ruby-string">&quot;&quot;</span>)
          <span class="ruby-identifier">oline</span> = <span
								class="ruby-identifier">line</span>
          <span class="ruby-identifier">res</span> <span
								class="ruby-operator">+=</span> <span class="ruby-identifier">line</span>.<span
								class="ruby-identifier">chop</span>
          <span class="ruby-comment">#              p :lne_by_line</span>
          <span class="ruby-comment">#              p line</span>
          <span class="ruby-keyword">if</span> <span
								class="ruby-identifier">stderr_is_open</span>
            <span class="ruby-identifier">error_mesg</span> <span
								class="ruby-operator">+=</span> <span class="ruby-identifier">stderr</span>.<span
								class="ruby-identifier">read_nonblock</span>(<span
								class="ruby-value">256</span>)
          <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">end</span>
        
      <span class="ruby-keyword">rescue</span> <span
								class="ruby-constant">Errno</span><span class="ruby-operator">::</span><span
								class="ruby-constant">EIO</span>
        <span class="ruby-identifier">res</span> <span
								class="ruby-operator">+=</span> <span class="ruby-identifier">oline</span>.<span
								class="ruby-identifier">chop</span>
        <span class="ruby-constant">SystemUtils</span>.<span
								class="ruby-identifier">debug_output</span>(<span
								class="ruby-string">&quot;read stderr&quot;</span>,<span
								class="ruby-identifier">oline</span>)
        <span class="ruby-identifier">error_mesg</span> <span
								class="ruby-operator">+=</span> <span class="ruby-identifier">stderr</span>.<span
								class="ruby-identifier">read_nonblock</span>(<span
								class="ruby-value">256</span>)
      <span class="ruby-keyword">rescue</span>  <span
								class="ruby-constant">IO</span><span class="ruby-operator">::</span><span
								class="ruby-constant">WaitReadable</span>
        <span class="ruby-keyword">retry</span>
      <span class="ruby-keyword">rescue</span> <span
								class="ruby-constant">EOFError</span>
        <span class="ruby-keyword">if</span> <span
								class="ruby-identifier">stdout</span>.<span
								class="ruby-identifier">closed?</span> <span
								class="ruby-operator">==</span> <span class="ruby-keyword">false</span>
          <span class="ruby-identifier">stderr_is_open</span> = <span
								class="ruby-keyword">false</span>
          <span class="ruby-keyword">retry</span>
        <span class="ruby-keyword">elsif</span> <span
								class="ruby-identifier">stderr</span>.<span
								class="ruby-identifier">closed?</span> <span
								class="ruby-operator">==</span> <span class="ruby-keyword">false</span>
          <span class="ruby-identifier">error_mesg</span> <span
								class="ruby-operator">+=</span> <span class="ruby-identifier">stderr</span>.<span
								class="ruby-identifier">read_nonblock</span>(<span
								class="ruby-value">1000</span>)
          <span class="ruby-identifier">container</span>.<span
								class="ruby-identifier">last_result</span>=(  <span
								class="ruby-identifier">res</span>)
          <span class="ruby-identifier">container</span>.<span
								class="ruby-identifier">last_error</span>=( <span
								class="ruby-identifier">error_mesgs</span>)
        <span class="ruby-keyword">else</span>
          <span class="ruby-identifier">container</span>.<span
								class="ruby-identifier">last_result</span>=(  <span
								class="ruby-identifier">res</span>)
          <span class="ruby-identifier">container</span>.<span
								class="ruby-identifier">last_error</span>=( <span
								class="ruby-identifier">error_mesgs</span>)
        <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">end</span>
      <span class="ruby-ivar">@last_error</span>=<span
								class="ruby-identifier">error_mesg</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">error_mesg</span>.<span
								class="ruby-identifier">include?</span>(<span
								class="ruby-string">&quot;Error&quot;</span>)
        <span class="ruby-identifier">container</span>.<span
								class="ruby-identifier">last_error</span>=(<span
								class="ruby-identifier">error_mesg</span>)

        <span class="ruby-keyword">return</span> <span
								class="ruby-keyword">false</span>
      <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">container</span>.<span
								class="ruby-identifier">last_error</span>=(<span
								class="ruby-string">&quot;&quot;</span>)
      <span class="ruby-keyword">end</span>
      <span class="ruby-comment">#</span>
      <span class="ruby-comment">#          if res.start_with?(&quot;[&quot;) == true</span>
      <span class="ruby-comment">#            res = res +&quot;]&quot;</span>
      <span class="ruby-comment">#          end</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">res</span> <span
								class="ruby-operator">!=</span> <span class="ruby-keyword">nil</span> <span
								class="ruby-operator">&amp;&amp;</span> <span
								class="ruby-identifier">res</span>.<span class="ruby-identifier">end_with?</span>(<span
								class="ruby-string">&#39;]&#39;</span>) <span
								class="ruby-operator">==</span> <span class="ruby-keyword">false</span>
        <span class="ruby-identifier">res</span><span
								class="ruby-operator">+=</span><span class="ruby-string">&#39;]&#39;</span>
      <span class="ruby-keyword">end</span>

      <span class="ruby-identifier">container</span>.<span
								class="ruby-identifier">last_result</span>=(<span
								class="ruby-identifier">res</span>)
      <span class="ruby-keyword">return</span> <span
								class="ruby-keyword">true</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">rescue</span> <span class="ruby-constant">Exception</span>=<span
								class="ruby-operator">&gt;</span><span class="ruby-identifier">e</span>
    <span class="ruby-ivar">@last_error</span>=<span
								class="ruby-identifier">error_mesg</span> <span
								class="ruby-operator">+</span> <span class="ruby-identifier">e</span>.<span
								class="ruby-identifier">to_s</span>
    <span class="ruby-identifier">container</span>.<span
								class="ruby-identifier">last_result</span>=(<span
								class="ruby-identifier">res</span>)
    <span class="ruby-identifier">container</span>.<span
								class="ruby-identifier">last_error</span>=(<span
								class="ruby-identifier">error_mesg</span> <span
								class="ruby-operator">+</span> <span class="ruby-identifier">e</span>.<span
								class="ruby-identifier">to_s</span>)
    <span class="ruby-constant">SystemUtils</span>.<span
								class="ruby-identifier">log_exception</span>(<span
								class="ruby-identifier">e</span>)
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">false</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
<span class="ruby-keyword">end</span>
						</pre>
					</div>

				</div>




			</div>


			<div id="method-i-signal_container_process" class="method-detail ">

				<div class="method-heading">
					<span class="method-name">signal_container_process</span><span
						class="method-args">(pid,signal,container)</span> <span
						class="method-click-advice">click to toggle source</span>

				</div>


				<div class="method-description">






					<div class="method-source-code"
						id="signal_container_process-source">
						<pre>
							<span class="ruby-comment"># File api/system/DockerApi.rb, line 86</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">signal_container_process</span>(<span
								class="ruby-identifier">pid</span>,<span class="ruby-identifier">signal</span>,<span
								class="ruby-identifier">container</span>)
  <span class="ruby-identifier">clear_error</span>
  <span class="ruby-identifier">commandargs</span>=<span
								class="ruby-string">&quot; exec &quot;</span> <span
								class="ruby-operator">+</span> <span class="ruby-identifier">container</span>.<span
								class="ruby-identifier">containerName</span> <span
								class="ruby-operator">+</span> <span class="ruby-string">&quot; kill -&quot;</span> <span
								class="ruby-operator">+</span> <span class="ruby-identifier">signal</span> <span
								class="ruby-operator">+</span> <span class="ruby-string">&quot; &quot;</span> <span
								class="ruby-operator">+</span> <span class="ruby-identifier">pid</span>.<span
								class="ruby-identifier">to_s</span>
  <span class="ruby-keyword">return</span>  <span
								class="ruby-identifier">run_docker</span>(<span
								class="ruby-identifier">commandargs</span>,<span
								class="ruby-identifier">container</span>)
<span class="ruby-keyword">rescue</span>  <span class="ruby-constant">Exception</span>=<span
								class="ruby-operator">&gt;</span><span class="ruby-identifier">e</span>
  <span class="ruby-constant">SystemUtils</span>.<span
								class="ruby-identifier">log_exception</span>(<span
								class="ruby-identifier">e</span>)
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">false</span>
<span class="ruby-keyword">end</span>
						</pre>
					</div>

				</div>




			</div>


			<div id="method-i-start_container" class="method-detail ">

				<div class="method-heading">
					<span class="method-name">start_container</span><span
						class="method-args">(container)</span> <span
						class="method-click-advice">click to toggle source</span>

				</div>


				<div class="method-description">






					<div class="method-source-code" id="start_container-source">
						<pre>
							<span class="ruby-comment"># File api/system/DockerApi.rb, line 18</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">start_container</span>   <span
								class="ruby-identifier">container</span>
  <span class="ruby-identifier">clear_error</span>
  <span class="ruby-keyword">begin</span>
    <span class="ruby-identifier">commandargs</span> =<span
								class="ruby-string">&quot; start &quot;</span> <span
								class="ruby-operator">+</span> <span class="ruby-identifier">container</span>.<span
								class="ruby-identifier">containerName</span>
    <span class="ruby-keyword">return</span>  <span
								class="ruby-identifier">run_docker</span>(<span
								class="ruby-identifier">commandargs</span>,<span
								class="ruby-identifier">container</span>)
  <span class="ruby-keyword">rescue</span>  <span class="ruby-constant">Exception</span>=<span
								class="ruby-operator">&gt;</span><span class="ruby-identifier">e</span>
    <span class="ruby-constant">SystemUtils</span>.<span
								class="ruby-identifier">log_exception</span>(<span
								class="ruby-identifier">e</span>)
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">false</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span>
						</pre>
					</div>

				</div>




			</div>


			<div id="method-i-stop_container" class="method-detail ">

				<div class="method-heading">
					<span class="method-name">stop_container</span><span
						class="method-args">(container)</span> <span
						class="method-click-advice">click to toggle source</span>

				</div>


				<div class="method-description">






					<div class="method-source-code" id="stop_container-source">
						<pre>
							<span class="ruby-comment"># File api/system/DockerApi.rb, line 29</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">stop_container</span> <span
								class="ruby-identifier">container</span>
  <span class="ruby-identifier">clear_error</span>
  <span class="ruby-keyword">begin</span>
    <span class="ruby-identifier">commandargs</span>=<span
								class="ruby-string">&quot; stop &quot;</span> <span
								class="ruby-operator">+</span> <span class="ruby-identifier">container</span>.<span
								class="ruby-identifier">containerName</span>
    <span class="ruby-keyword">return</span>  <span
								class="ruby-identifier">run_docker</span>(<span
								class="ruby-identifier">commandargs</span>,<span
								class="ruby-identifier">container</span>)
  <span class="ruby-keyword">rescue</span>  <span class="ruby-constant">Exception</span>=<span
								class="ruby-operator">&gt;</span><span class="ruby-identifier">e</span>
    <span class="ruby-constant">SystemUtils</span>.<span
								class="ruby-identifier">log_exception</span>(<span
								class="ruby-identifier">e</span>)
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">false</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span>
						</pre>
					</div>

				</div>




			</div>


			<div id="method-i-unpause_container" class="method-detail ">

				<div class="method-heading">
					<span class="method-name">unpause_container</span><span
						class="method-args">(container)</span> <span
						class="method-click-advice">click to toggle source</span>

				</div>


				<div class="method-description">






					<div class="method-source-code" id="unpause_container-source">
						<pre>
							<span class="ruby-comment"># File api/system/DockerApi.rb, line 64</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">unpause_container</span> <span
								class="ruby-identifier">container</span>
  <span class="ruby-identifier">clear_error</span>
  <span class="ruby-keyword">begin</span>
    <span class="ruby-identifier">commandargs</span>=<span
								class="ruby-string">&quot; unpause &quot;</span> <span
								class="ruby-operator">+</span> <span class="ruby-identifier">container</span>.<span
								class="ruby-identifier">containerName</span>
    <span class="ruby-keyword">return</span>  <span
								class="ruby-identifier">run_docker</span>(<span
								class="ruby-identifier">commandargs</span>,<span
								class="ruby-identifier">container</span>)
  <span class="ruby-keyword">rescue</span>  <span class="ruby-constant">Exception</span>=<span
								class="ruby-operator">&gt;</span><span class="ruby-identifier">e</span>
    <span class="ruby-constant">SystemUtils</span>.<span
								class="ruby-identifier">log_exception</span>(<span
								class="ruby-identifier">e</span>)
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">false</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span>
						</pre>
					</div>

				</div>




			</div>


		</section>

		<section id="protected-instance-5Buntitled-5D-method-details"
			class="method-section">
			<header>
				<h3>Protected Instance Methods</h3>
			</header>


			<div id="method-i-clear_error" class="method-detail ">

				<div class="method-heading">
					<span class="method-name">clear_error</span><span
						class="method-args">()</span> <span class="method-click-advice">click
						to toggle source</span>

				</div>


				<div class="method-description">






					<div class="method-source-code" id="clear_error-source">
						<pre>
							<span class="ruby-comment"># File api/system/DockerApi.rb, line 364</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">clear_error</span>
  <span class="ruby-ivar">@last_error</span> = <span class="ruby-string">&quot;&quot;</span>
<span class="ruby-keyword">end</span>
						</pre>
					</div>

				</div>




			</div>


			<div id="method-i-container_log_dir" class="method-detail ">

				<div class="method-heading">
					<span class="method-name">container_log_dir</span><span
						class="method-args">(container)</span> <span
						class="method-click-advice">click to toggle source</span>

				</div>


				<div class="method-description">






					<div class="method-source-code" id="container_log_dir-source">
						<pre>
							<span class="ruby-comment"># File api/system/DockerApi.rb, line 360</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">container_log_dir</span> <span
								class="ruby-identifier">container</span>
  <span class="ruby-keyword">return</span> <span class="ruby-constant">SysConfig</span>.<span
								class="ruby-constant">SystemLogRoot</span> <span
								class="ruby-operator">+</span> <span class="ruby-string">&quot;/&quot;</span>  <span
								class="ruby-operator">+</span> <span class="ruby-identifier">container</span>.<span
								class="ruby-identifier">ctype</span> <span class="ruby-operator">+</span> <span
								class="ruby-string">&quot;s/&quot;</span> <span
								class="ruby-operator">+</span> <span class="ruby-identifier">container</span>.<span
								class="ruby-identifier">containerName</span>
<span clas